# Logseq Koreader Sync
A [KOReader](https://koreader.rocks/) to [Logseq](https://logseq.com/) syncing plugin

Known to work with KOReader 2025.04.  
Built with a separate sidecar directory (see https://github.com/koreader/koreader/pull/10074) in mind.

This is a tool to import your annotations from KOReader in a read-only format - this is a one directional synchronization[^1]. It is not affiliated with the KOReader project.

The synced pages generated by this plugin are intended to be read-only. However, the blocks created within them are intended to be freely referenced elsewhere in your graph. Their UUIDs **should** not change. If they do, please create an issue.

[^1]: perhaps one day we can do bidirectional synchronization, but that sounds like a very difficult task right now.

## Fork

This is a fork of the original [Logseq Koreader Sync](https://github.com/isosphere/logseq-koreader-sync) plugin by Matthew Scheffel. The original code remains available at the [original repository](https://github.com/isosphere/logseq-koreader-sync).

## ðŸš€ Features
- [x] Import annotations from a [KOReader](https://koreader.rocks/) metadata folder containing "*.sdr" folders with `metadata.*.lua` files
- [x] Blocks imported by the sync persist despite future syncs - references should remain stable
- [x] Two sync modes: single-page (legacy) or one-page-per-book (new)
- [x] Configurable page naming conventions for per-book pages
- [x] Automatic index page for per-book sync mode
- [x] Configurable book page prefix

## ðŸ› ï¸ Usage

### Basic Setup

1. Install the plugin from the Logseq marketplace, in-app
2. Pin the "koreader-sync" icon to your Logseq toolbar
3. Press the "koreader-sync" icon on your toolbar, and when prompted locate your KOReader metadata directory
4. Reference the created blocks, but don't alter them.

I use [Syncthing](https://syncthing.net/) on Android to ensure that I have a local copy of my metadata.
There is also a plugin version of [syncthing on KOReader](https://github.com/jasonchoimtt/koreader-syncthing) that enables kindle/kobo->local copies of the metadata. 

### Sync Modes

#### Single-Page Mode (Legacy)
All books are stored as blocks under a single page (default: `_logseq-koreader-sync`). This is the original sync behavior.

**Pros:**
- All books in one place
- Simple structure

**Cons:**
- Large page with many books can become unwieldy
- Less graph integration

#### Per-Page Mode (New)
Each book gets its own Logseq page, with an index page listing all synced books.

**Pros:**
- Better organization with each book as a first-class page
- Better graph navigation and linking
- Easier to manage large libraries
- Books can be referenced more naturally in your graph

**Cons:**
- More pages in your graph
- Requires index page for overview

### Configuration

Configure these options in the plugin settings:

- **Sync Mode**: Choose between "single-page" or "per-page" mode
- **Page Naming Convention**: How to name book pages
  - `author_title`: "Author - Book Title" (recommended, reduces conflicts)
  - `book_title`: "Book Title" only
- **Book Page Prefix**: Optional prefix added to all book page names (e.g., "ðŸ“š ")
- **Index Page Name**: Name of the index page (per-page mode only, default: "KOReader Books")
- **Sync Page Name**: Name of the sync page (single-page mode only, default: "_logseq-koreader-sync")
- **Max Description Length**: Maximum characters of book description to import
- **Collapse Bookmarks**: Automatically collapse bookmarks with personal notes
- **Sync Page Bookmarks**: Include page bookmarks (annotations without text)
- **Remember KOReader Path**: Save directory handle for future syncs

### Migration

Existing users with single-page sync can migrate to per-page mode:

1. Open plugin settings and change "Sync Mode" to "per-page"
2. Run a sync
3. The plugin will create new book pages and an index page
4. **Manual cleanup**: Delete or archive your old single-page sync page if desired

Note: Manual migration is required - the plugin does not automatically migrate existing data to preserve control over your graph.

![demo animation](demo.gif)
